<h1>生徒の詳細</h1>

<div class="nav justify-content-left">
    <%= link_to '新規指導報告書登録', new_report_path(student_id: @student.id), class: 'btn btn-primary mb-3' %>
</div>

<table class="table table-hover table-bordered shadow-sm my-3">
    <tbody>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:id) %></th>
            <td><%= @student.id %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:name) %></th>
            <td><%= @student.name %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:kana) %></th>
            <td><%= @student.kana %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:email) %></th>
            <td><%= @student.email %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:birthdate) %></th>
            <td><%= @student.birthdate%></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:school) %></th>
            <td><%= @student.school %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:memo) %></th>
            <td><%= @student.memo %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:created_at) %></th>
            <td><%= @student.created_at.strftime("%Y年%m月%d日 %H:%M") %></td>
        </tr>
        <tr>
            <th class="table-primary"><%= Student.human_attribute_name(:updated_at) %></th>
            <td><%= @student.updated_at.strftime("%Y年%m月%d日 %H:%M") %></td>
        </tr>
    </tbody>
</table>

<div class="text-center">
<% if current_user.admin %>
    <%= link_to "編集", edit_student_path, class: "btn btn-primary mx-3" %>
    <%= link_to "削除", @student, method: :delete, data: { confirm: "生徒「#{@student.id}」を削除します。よろしいですか？"}, class: "btn btn-danger" %>
<% end %>
</div>

<table class="table table-hover table-bordered shadow-sm my-4">
    <thead class="thead-default">
        <tr class="table-success">
            <th><%= Report.human_attribute_name(:id) %></th>
            <th><%= Report.human_attribute_name(:subject) %></th>
            <th><%= User.human_attribute_name(:name) %></th>
            <th><%= Report.human_attribute_name(:created_at) %></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    <% @student.reports.each do |report| %>
        <tr id="report-#{report.id}">
            <td><%= report.id %></td>
            <td><%= report.subject %></td>
            <td><%= report.user.name %></td>
            <td><%= report.created_at.strftime("%Y年%m月%d日" + "(%a)" + " %H:%M") %></td>
            <td class="text-center">
                <%= link_to "詳細", report_path(report), class: "btn btn-primary mr-3" %>
                <%= link_to "削除", report, method: :delete, remote: true, data: { confirm: "報告書「#{report.id}」を削除します。よろしいですか？"}, class: "btn btn-danger" %>
            </td>
        </tr>
    <% end %>    
    </tbody>
</table>